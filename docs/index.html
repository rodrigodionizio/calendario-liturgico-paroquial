<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO B√°sico -->
  <title>Calend√°rio Lit√∫rgico 2026 | Par√≥quia Senhor Bom Jesus - Itabirinha MG</title>
  <meta name="description" content="Acompanhe o calend√°rio lit√∫rgico, hor√°rios de missas, eventos e escalas da Par√≥quia Senhor Bom Jesus em Itabirinha, Minas Gerais. Sistema digital de gest√£o pastoral." />
  <meta name="keywords" content="par√≥quia, igreja cat√≥lica, itabirinha, minas gerais, calend√°rio lit√∫rgico, hor√°rio de missa, eventos paroquiais, sacristia digital" />
  <meta name="author" content="Rodrigo Dion√≠zio" />
  <link rel="canonical" href="https://rodrigodionizio.github.io/calendario-liturgico-paroquial/" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://rodrigodionizio.github.io/calendario-liturgico-paroquial/" />
  <meta property="og:title" content="Par√≥quia Senhor Bom Jesus - Itabirinha MG" />
  <meta property="og:description" content="Sistema digital de gest√£o pastoral com calend√°rio lit√∫rgico, escalas e eventos da par√≥quia. Acompanhe nossa programa√ß√£o religiosa." />
  <meta property="og:image" content="https://rodrigodionizio.github.io/calendario-liturgico-paroquial/assets/img/og-image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="pt_BR" />
  <meta property="og:site_name" content="Par√≥quia Senhor Bom Jesus" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://rodrigodionizio.github.io/calendario-liturgico-paroquial/" />
  <meta name="twitter:title" content="Par√≥quia Senhor Bom Jesus - Itabirinha MG" />
  <meta name="twitter:description" content="Sistema digital de gest√£o pastoral com calend√°rio lit√∫rgico, escalas e eventos paroquiais." />
  <meta name="twitter:image" content="https://rodrigodionizio.github.io/calendario-liturgico-paroquial/assets/img/og-image.jpg" />
  
  <!-- Schema.org Markup para SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Church",
    "name": "Par√≥quia Senhor Bom Jesus",
    "description": "Par√≥quia Cat√≥lica em Itabirinha, Minas Gerais",
    "url": "https://rodrigodionizio.github.io/calendario-liturgico-paroquial/",
    "telephone": "+55-33-99428407",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Pra√ßa da Igreja",
      "addressLocality": "Itabirinha",
      "addressRegion": "MG",
      "postalCode": "35280-000",
      "addressCountry": "BR"
    },
    "sameAs": [
      "https://www.instagram.com/bomjesusdeitabirinha/",
      "https://www.youtube.com/@pascomdabomjesusitabirinha"
    ],
    "memberOf": {
      "@type": "Organization",
      "name": "Diocese de Te√≥filo Otoni"
    }
  }
  </script>

  <!-- Preconnect para Performance -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link rel="preconnect" href="https://gmfmebnodmtozpzhlgvk.supabase.co" crossorigin />

  <!-- Supabase JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Estilos CSS (Design System e Layout) -->
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="stylesheet" href="assets/css/badge-comunidades.css" />

  <!-- Favicon Padr√£o -->
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <!-- Favicon em Alta Resolu√ß√£o -->
  <link rel="icon" type="image/png" href="assets/img/favicon.ico" />
  
  <!-- Configura√ß√µes para PWA Mobile -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#a41d31" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Sacristia" />

  <!-- √çcones para iPhone/iOS -->
  <link rel="apple-touch-icon" href="assets/img/icon-192.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="assets/img/icon-152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon-180.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="assets/img/icon-167.png" />

  <!-- Script de Registro do Service Worker com Detec√ß√£o de Update -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        // Verifica se est√° rodando via HTTP/HTTPS (n√£o file://)
        if (location.protocol === 'http:' || location.protocol === 'https:') {
          navigator.serviceWorker
            .register("./sw.js")
            .then((reg) => {
              console.log("‚úÖ PWA: Service Worker Ativo!", reg.scope);
              
              // Detecta quando h√° uma nova vers√£o dispon√≠vel
              reg.addEventListener('updatefound', () => {
                const newWorker = reg.installing;
                console.log("üîÑ PWA: Nova vers√£o detectada, baixando...");
                
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // Nova vers√£o pronta - mostra toast
                    window.dispatchEvent(new CustomEvent('sacristia:swUpdate', { 
                      detail: { registration: reg } 
                    }));
                  }
                });
              });
              
              // Verifica se j√° tem uma vers√£o esperando
              if (reg.waiting) {
                window.dispatchEvent(new CustomEvent('sacristia:swUpdate', { 
                  detail: { registration: reg } 
                }));
              }
            })
            .catch((err) => console.error("‚ùå PWA: Erro no registro", err));
          
          // Recarrega quando o SW assumir controle (ap√≥s update)
          let refreshing = false;
          navigator.serviceWorker.addEventListener('controllerchange', () => {
            if (!refreshing) {
              refreshing = true;
              console.log("üöÄ PWA: Nova vers√£o ativa - recarregando...");
              window.location.reload();
            }
          });
        } else {
          console.log("‚ö†Ô∏è PWA: Service Worker desabilitado (ambiente local)");
        }
      });
    }
  </script>
  
  <!-- Lucide Icons (para √≠cones do mural e sistema) -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <!-- ==========================================================================
         CABE√áALHO (HEADER)
         Cont√©m a Logo Principal e Bot√£o de Login/Logout (via JS)
    ========================================================================== -->
  <header>
    <!-- BOT√ÉO MENU MOBILE (S√≥ aparece no celular) -->
    <button id="btn-mobile-menu" onclick="toggleSidebarMobile()" aria-label="Abrir Menu">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
    <div class="header-logo-container">
      <!-- Logo Horizontal Negativa (Branca sobre Vinho) -->
      <img src="assets/img/logo-horizontal-negativa.png" alt="Par√≥quia Senhor Bom Jesus" class="header-logo-img" />
    </div>
  </header>

  <!-- ==========================================================================
         LAYOUT PRINCIPAL (SIDEBAR + CONTE√öDO)
         Estrutura Flexbox: Sidebar Fixa (Desktop) + Main Scroll√°vel
    ========================================================================== -->
  <div class="app-layout">
    <!-- SIDEBAR: FILTROS E NAVEGA√á√ÉO SECUND√ÅRIA -->
    <aside class="sidebar">
      <!-- Bot√£o de Impress√£o (Estilo Oficial) -->
      <div class="filter-group" style="margin-top: 20px">
        <button onclick="abrirOpcoesImpressao()" style="
              width: 100%;
              padding: 12px;
              background-color: var(--cor-vinho);
              color: #fff;
              border: none;
              border-radius: 8px;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 10px;
              font-family: 'AntennaCond', sans-serif;
              font-weight: bold;
              font-size: 1rem;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              transition: transform 0.2s;
            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
          <!-- √çcone Impressora SVG -->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="6 9 6 2 18 2 18 9"></polyline>
            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
            <rect x="6" y="14" width="12" height="8"></rect>
          </svg>
          IMPRIMIR ESCALA
        </button>
      </div>

      <!-- √ÅREA DIN√ÇMICA DE FILTROS (EQUIPES) -->
      <!-- O JS busca no banco e injeta os checkboxes aqui -->
      <div class="filter-group" id="filtro-equipes">
        <h3>Carregando Equipes...</h3>
      </div>

      
    </aside>

    <!-- √ÅREA DE CONTE√öDO (COM SCROLL PR√ìPRIO) -->
    <main class="main-content">
      <div class="scroll-wrapper">
        <!-- NAVEGA√á√ÉO DO M√äS (Header Interno) -->
        <div class="month-header">
          <h1 class="month-name">Carregando...</h1>
          
          <!-- Filtro de Comunidades -->
          <div id="public-community-filter-wrapper" style="display: flex; align-items: center; gap: 12px;">
            <label for="public-community-filter" style="font-size: 0.95rem; font-weight: 600; color: var(--cor-vinho); white-space: nowrap;">
              <i data-lucide="map-pin" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;"></i>
              Local:
            </label>
            <select 
              id="public-community-filter" 
              class="sds-select"
              onchange="filtrarPorComunidade(this.value)"
              style="
                min-width: 180px;
                max-width: 280px;
                padding: 8px 32px 8px 12px;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 0.95rem;
                font-weight: 500;
                background-color: white;
                background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg width=%2714%27 height=%278%27 viewBox=%270 0 14 8%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3e%3cpath d=%27M1 1l6 6 6-6%27 stroke=%27%23a41d31%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3e%3c/svg%3e');
                background-repeat: no-repeat;
                background-position: right 10px center;
                cursor: pointer;
                transition: all 0.2s;
                appearance: none;
              "
              onfocus="this.style.borderColor='#fbb558'; this.style.boxShadow='0 0 0 3px rgba(251,181,88,0.1)'"
              onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
            >
              <option value="">üìç Todas as Comunidades</option>
              <option value="matriz">‚õ™ Matriz</option>
              <!-- Op√ß√µes din√¢micas ser√£o adicionadas via JavaScript -->
            </select>
          </div>
          
          <div class="nav-buttons">
            <button class="btn-nav" aria-label="M√™s Anterior">&lt;</button>
            <button class="btn-nav">Hoje</button>
            <button class="btn-nav" aria-label="Pr√≥ximo M√™s">&gt;</button>
          </div>
        </div>

        <!-- GRID DO CALEND√ÅRIO (VIS√ÉO MENSAL) -->
        <!-- O JavaScript vai injetar os dias aqui dentro -->
        <div class="calendar-wrapper">
          <!-- Cabe√ßalhos dos Dias -->
          <div class="day-header">Dom</div>
          <div class="day-header">Seg</div>
          <div class="day-header">Ter</div>
          <div class="day-header">Qua</div>
          <div class="day-header">Qui</div>
          <div class="day-header">Sex</div>
          <div class="day-header">S√°b</div>

          <!-- Placeholder de Carregamento -->
          <div style="
                grid-column: 1 / -1;
                padding: 50px;
                text-align: center;
                color: #999;
                font-style: italic;
              ">
            Buscando dados lit√∫rgicos...
          </div>
        </div>

        <!-- ==========================================================================
                     MURAL DE AVISOS PAROQUIAIS
                     Posicionado abaixo do calend√°rio principal
                ========================================================================== -->
        <div class="mural-avisos-wrapper"></div>

        <!-- ==========================================================================
                     RODAP√â (FOOTER)
                     Integrado ao scroll da p√°gina principal
                ========================================================================== -->
        <footer class="main-footer">
          <div class="footer-container">
            <!-- Coluna Identidade -->
            <div class="footer-col">
              <img src="assets/img/logo-horizontal-negativa.png" alt="Logo Rodap√©" class="footer-logo" />
              <p class="footer-subtitle">Itabirinha / MG</p>
            </div>

            <!-- Coluna Institucional -->
            <div class="footer-col">
              <h4 class="footer-heading">Informa√ß√µes</h4>
              <p><strong>P√°roco:</strong> Pe. Hugo Dami√£o Leal</p>
              <p>Diocese de Te√≥filo Otoni</p>
              <p class="destaque-atendimento" style="margin-top: 10px">
                Atendimento Paroquial<br /><span>Todas as quartas-feiras</span>
              </p>
            </div>

            <!-- Coluna Contato -->
            <div class="footer-col">
              <h4 class="footer-heading">Fale Conosco</h4>
              <a href="https://wa.me/553399428407" target="_blank" class="btn-whatsapp">
                <!-- SVG Whatsapp -->
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                </svg>
                (33) 9942-8407
              </a>
              <div class="social-links">
                <a href="https://www.instagram.com/bomjesusdeitabirinha/" target="_blank"><svg width="24" height="24"
                    viewBox="0 0 24 24" fill="currentColor">
                    <path
                      d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.85-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                  </svg></a>
                <a href="https://www.youtube.com/@pascomdabomjesusitabirinha" target="_blank"><svg width="28"
                    height="28" viewBox="0 0 24 24" fill="currentColor">
                    <path
                      d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
                  </svg></a>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            ¬© 2026 Par√≥quia Senhor Bom Jesus - Itabirinha/MG
          </div>
        </footer>
      </div>
    </main>
  </div>

  <!-- ==========================================================================
         MODAL OVERLAY (POPUP DE DETALHES)
         O conte√∫do √© injetado via JavaScript
    ========================================================================== -->
  <div class="modal-overlay" id="modalOverlay">
    <div id="modalContent"></div>
  </div>
  <!-- M√ÅSCARA ESCURA PARA FECHAR MENU MOBILE -->
  <div id="sidebar-overlay" onclick="toggleSidebarMobile()"></div>
  <!-- ==========================================================================
         √ÅREA DE IMPRESS√ÉO (RELAT√ìRIO OCULTO)
    ========================================================================== -->
  <div id="relatorio-impressao" class="print-only">
    <header class="print-header">
      <div class="print-header__logo">
        <img src="assets/img/logo_paroquia_torre.png" alt="Logo" class="print-logo-circ" />
      </div>
      <div class="print-header__info">
        <h1 class="print-header__title">Par√≥quia Senhor Bom Jesus</h1>
        <h2 class="print-header__subtitle">Agenda Pastoral & Lit√∫rgica</h2>
      </div>
      <div class="print-header__period">
        <!-- <label class="print-header__label">M√™s de Refer√™ncia</label>-->
        <h3 id="print-month-name" class="print-header__month">JANEIRO</h3>
        <span id="print-year-val" class="print-header__year">2026</span>
      </div>
    </header>

    <table class="print-table">
      <thead>
        <tr>
          <th width="12%">Data</th>
          <th width="10%">Hora</th>
          <th width="40%">Evento / Liturgia</th>
          <th width="38%">Detalhes / Equipes</th>
        </tr>
      </thead>
      <tbody id="print-table-body">
        <!-- Injetado pelo JS -->
      </tbody>
    </table>

    <footer class="print-footer">
      <span>Gerado pelo Sistema Sacristia Digital ‚Ä¢ Par√≥quia Senhor Bom
        Jesus</span>
      <span id="print-footer-date"></span>
    </footer>
  </div>

  <!-- ==========================================================================
         SCRIPTS (ORDEM OBRIGAT√ìRIA: LIB -> API -> CONTROLLERS -> APP)
    ========================================================================== -->

  <!-- 1. Error Handler (Sistema de tratamento de erros) -->
  <script src="assets/js/error-handler.js"></script>

  <!-- 2. M√≥dulo de Conex√£o (Cria window.api com cache) -->
  <script src="assets/js/api.js"></script>

  <!-- 3. Modal Controller (Sistema unificado de modais) -->
  <script src="assets/js/modal-controller.js"></script>

  <!-- 4. M√≥dulo do Calend√°rio (Essencial para Integra√ß√µes) -->
  <script src="assets/js/calendar-engine.js"></script>

  <!-- 5. Aplica√ß√£o Principal (Usa window.api) -->
  <script src="assets/js/app.js" defer></script>
</body>

</html>